- [Part1-9장. 변수의 영역과 데이터 공유](#part1-9장-변수의-영역과-데이터-공유)
  - [1. 변수의 종류와 범위](#1-변수의-종류와-범위)
    - [2. 함수를 이용한 데이터 공유 방법](#2-함수를-이용한-데이터-공유-방법)

# Part1-9장. 변수의 영역과 데이터 공유

## 1. 변수의 종류와 범위

- 지역변수 (`main`함수의 `int a` → `a`는 `main`이라는 나라에서 사용할 수 있는 지역 변수)

  - 함수 내부에서 사용
  - 조건문 또는 반복문의 중괄호 내부에서 사용
  - 함수의 매개 변수(함수의 인자, 함수의 입력값) → 함수의 입력 변수로 사용
  - 초기화 하지 않으면 쓰레기 값 저장
  - 함수가 종료되면 변수가 사라짐 (중괄호 내에서 초기화할 때 생성, 탈출할 때 소멸)
    → 메모리가 생성되고 사라지는 것은 컴파일러가 알아서 해줌

  > `lib`폴더 : 함수의 정의 부분은 `.obj`, `.lib`(기계코드)로 만들어 놓음  
  >  → `printf()`를 그냥 호출해서 쓸 수 있도록 만들어줌

- 전역변수

  - 중괄호 외부에서 사용
  - 프로그램이 종료되어야 메모리 사라짐 (프로그램 시작할 때 생성, 종료할 때 소멸)
  - 초기화하지 않아도 0 설정
  - 너무 많이 쓰면 프로그램 가독성 떨어짐

- 정적변수

  - 자료형 앞에 `static` 키워드를 붙임
  - 프로그램이 종료되어야 메모리 사라짐 (전역변수의 특징)
  - 초기화하지 않아도 0 설정 (전역변수의 특징)
  - 프로그램이 시작되면 초기화는 딱 한 번만 수행 (전역변수의 특징)
  - 중괄호 내에서 만들어짐(지역변수의 특징)

  > 전역 변수의 기능을 중괄호가 있는 지역에서 사용하고 싶을 때 씀 → 정적지역변수

- 외부변수

  - 외부 파일에 선언된 변수를 참조하는 변수
  - 자료형 앞에 `extern` 키워드를 사용
  - 다른 파일(외부)에 있는 전역 변수 참조
    | test1.c | test2.c |
    | ----------------- | ------------- |
    | int a=1; int b=3; | extern int a; |
    extern int b;
    a+b; |

  > `static`을 붙이면 외부에서 참조 못함 (`extern` 키워드로 접근 불가)  
  >  정적 전역 변수 → 컴파일은 되지만 솔루션 빌드는 안 됨

- 레지스터변수

  - CPU 내부의 레지스터에 변수를 할당하는 변수 (CPU안에 메모리가 있다는 뜻)
  - 처리속도 빠름
  - `register` 키워드 사용

  - 일반 변수

    | CPU    | 메모리 |
    | ------ | ------ |
    | + 수행 | 6 2 8  |

    → 6과 2를 가져와서 수행하고 다시 보냄

  - 레지스터 변수
    | CPU |
    | -------- |
    | 2 \* 3 6 |
    → 외부로 나갈 일이 없음

  > 레지스터 변수가 부족하면 자동으로 지역변수로 할당 (코드 최적화)  
  >  → 지역변수와 별 차이가 없을 수도 있음

- 프로세스: 실행중인 프로그램
  - 코드 영역: 프로그램의 실행 코드, 함수
  - 스택 영역: 매개 변수, 지역 변수
  - 데이터 영역: 전역 변수, 정적 변수
  - 힙 영역: 동적으로 메모리 할당하는 변수

### 2. 함수를 이용한 데이터 공유 방법

- 값을 복사해서 전달

  - 호출된 함수가 반환된 이후에도 호출한 함수에 있는 변수의 값은 변하지 않음
  - 값을 출력하거나 연산하는 경우에 사용

- 주소를 전달함

  - 포인터 연산 사용
  - 호출된 함수에서 호출한 함수에 있는 변수 값 변경 가능

- 주소를 반환함
  - 함수가 반환되면 저장 공간 사라짐 → 값을 복사하여 반환해야 호출한 함수에서 사용 가능
  - 정적 변수, 전역 변수는 주소 반환 가능 (함수 반환 후에도 변수의 저장공간 계속 유지)
  - 지역 변수의 주소는 반환 X
